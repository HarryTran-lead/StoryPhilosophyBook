/* ===================== THEME VARS ===================== */
:root{
  --bg-scene-1:#0b0b0f;         /* nền ngoài */
  --bg-scene-2:#111217;

  --page-1:#1a1a22;             /* nền trang */
  --page-2:#202028;

  --text-hi:#e5e5e5;            /* chữ chính */
  --text-md:#d1d5db;            /* đoạn văn */
  --muted:#9aa0a6;

  --amber-300:#fcd34d;
  --amber-400:#fbbf24;
  --amber-500:#f59e0b;
  --amber-600:#d97706;
  --amber-700:#b45309;

  --violet-300:#a78bfa;
  --violet-500:#7c3aed;

  --border-amber:rgba(245,158,11,.20);
  --glow-amber:rgba(245,158,11,.35);
}

/* ===================== SCENE / WRAPPER ===================== */
.book-scene{
  position:relative;
  width:100vw;height:100vh;
  display:flex;align-items:center;justify-content:center;
  overflow:hidden;
  background:radial-gradient(circle at center,var(--bg-scene-1) 0%,var(--bg-scene-2) 100%);
  color:var(--text-hi);
  font-family:'Georgia','Times New Roman',serif;
}

.book-scene::before{
  content:"";
  position:absolute;inset:0;
  background:radial-gradient(ellipse at center,transparent 0%,rgba(0,0,0,.22) 100%);
  pointer-events:none;
}

.book-container{
  position:relative;
  width:95vw;height:90vh;max-width:1400px;
  display:flex;align-items:center;justify-content:center;
  transform-style:preserve-3d;perspective:2000px;
  filter:drop-shadow(0 25px 60px rgba(0,0,0,.7));
  transition:transform .5s cubic-bezier(.4,0,.2,1);
}
.book-container:hover{ transform:rotateY(-3deg) rotateX(1deg) scale(1.02); }

.book{ position:relative;width:100%;height:100%;transform-style:preserve-3d; }

/* ===================== SPINE ===================== */
.book-spine{
  position:absolute;left:-3%;top:0;width:6%;height:100%;
  transform:rotateY(-90deg);transform-origin:right center;
  display:flex;align-items:center;justify-content:center;
  background:linear-gradient(to right,#78350f,#92400e,var(--amber-700));
  box-shadow:inset -10px 0 20px rgba(0,0,0,.6);
  border-radius:0 3px 3px 0;
}
.spine-text{
  writing-mode:vertical-lr;text-orientation:mixed;
  color:#fff;font-weight:700;font-size:16px;letter-spacing:3px;
  text-shadow:2px 2px 4px rgba(0,0,0,.5);
}

/* ===================== PAGES ===================== */
.book-page{
  position:absolute;inset:auto; /* keep left/right variants below */
  width:50%;height:100%;
  background:linear-gradient(135deg,var(--page-1) 0%,var(--page-2) 100%);
  color:var(--text-hi);
  border-radius:10px;border:1px solid var(--border-amber);
  box-shadow:inset 0 0 60px rgba(255,255,255,.02),0 0 25px rgba(0,0,0,.7);
  transform-origin:left center;
  transition:transform .6s cubic-bezier(.23,1,.32,1);
  overflow:hidden;
}
.book-page.left{ left:0;border-radius:8px 0 0 8px; }
.book-page.right{ right:0;border-radius:0 8px 8px 0; }
.book-page.flipping-next{ transform:rotateY(-180deg);z-index:10; }
.book-page.flipping-prev{ transform:rotateY(0deg);z-index:10; }

/* ===================== PAGE CONTENT ===================== */
.page-content{
  position:relative;box-sizing:border-box;
  width:100%;height:100%;padding:5% 6%;
  overflow-y:auto;scrollbar-width:thin;scrollbar-color:#475569 transparent;
  background:
    radial-gradient(circle at 15% 15%, rgba(245,158,11,.04) 0%, transparent 50%),
    radial-gradient(circle at 85% 85%, rgba(245,158,11,.04) 0%, transparent 50%);
}
.page-content::-webkit-scrollbar{ width:6px; }
.page-content::-webkit-scrollbar-thumb{ background:#475569;border-radius:3px; }
.page-content::before{
  content:"";position:absolute;inset:0 8% 0 8%;
  border-left:1px solid var(--border-amber);
  border-right:1px solid var(--border-amber);
  pointer-events:none;
}
.page-content.page-left::after{
  content:"";position:absolute;top:0;right:0;width:2px;height:100%;
  background:linear-gradient(to bottom,transparent, var(--border-amber) 20%, var(--border-amber) 80%, transparent);
}

/* Typography */
.page-header{ text-align:center;margin-bottom:35px;padding-bottom:20px;border-bottom:2px solid var(--border-amber);position:relative; }
.page-header::after{ content:"";position:absolute;left:50%;bottom:-2px;transform:translateX(-50%);width:50px;height:2px;background:linear-gradient(to right,var(--amber-700),var(--amber-500),var(--amber-700)); }
.page-header h2{ font-size:clamp(20px,3vw,26px);color:var(--amber-500);text-shadow:0 0 12px rgba(245,158,11,.5);margin:0 0 10px; }

.chapter-ornament{ font-size:24px;color:var(--violet-300);margin-top:10px; }

.page-body h3{ color:var(--violet-300);font-size:clamp(16px,2.5vw,20px);margin-bottom:20px;text-shadow:0 0 8px rgba(167,139,250,.4); }
.page-body p{ color:var(--text-md);line-height:1.9;margin-bottom:18px;text-align:justify;font-size:clamp(13px,2vw,15px);text-indent:1.5em; }
.first-letter::first-letter{ float:left;font-size:clamp(40px,6vw,60px);line-height:.9;margin:8px 12px 0 0;color:var(--amber-400);font-weight:700;text-shadow:0 0 10px rgba(251,191,36,.5); }

/* ===================== CONTENT BOXES ===================== */
.philosophy-quote,.stoic-quote,.rumi-quote{
  background:linear-gradient(135deg, rgba(167,139,250,.05), rgba(245,158,11,.08));
  padding:25px;margin:25px 0;border-left:4px solid var(--amber-500);
  border-radius:0 8px 8px 0;position:relative;
  color:var(--amber-300);font-style:italic;
  box-shadow:0 6px 20px rgba(0,0,0,.4);
}
.quote-symbol{ position:absolute;top:-5px;left:15px;font-size:60px;color:var(--amber-300);opacity:.35;font-family:serif; }
.quote-author{ text-align:right;font-size:clamp(12px,2vw,14px);color:var(--amber-400);font-weight:700;margin-top:15px; }

.reflection-box,.meditation-box,.connection-wisdom,.wisdom-insight,.summary-item,.principle,.love-item{
  background:linear-gradient(135deg, rgba(124,58,237,.05), rgba(245,158,11,.07));
  border:1px solid var(--border-amber);color:var(--text-hi);
  border-radius:8px;box-shadow:0 4px 15px rgba(0,0,0,.5);
}
.reflection-title,.connection-title{ font-weight:700;color:var(--violet-500);margin-bottom:15px;font-size:clamp(14px,2.2vw,16px);text-transform:uppercase;letter-spacing:1px; }
.wisdom-item{ display:flex;align-items:flex-start;margin-bottom:15px;padding:10px;border-radius:5px;transition:.2s; }
.wisdom-item:hover{ transform:translateX(5px);background:rgba(124,58,237,.06); }
.wisdom-number{ width:25px;height:25px;background:var(--violet-500);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;margin-right:15px;flex-shrink:0;font-size:12px;box-shadow:0 2px 8px rgba(124,58,237,.3); }

.balance-grid{ display:grid;grid-template-columns:1fr 1fr;gap:20px;margin:25px 0; }
.balance-item{ text-align:center;padding:20px;border-radius:8px;transition:.2s; }
.balance-item:hover{ transform:translateY(-3px);box-shadow:0 8px 25px rgba(0,0,0,.1); }
.balance-item:first-child{ background:linear-gradient(135deg, rgba(251,191,36,.1), rgba(253,224,71,.05)); border:1px solid rgba(251,191,36,.2); }
.balance-item:last-child{ background:linear-gradient(135deg, rgba(99,102,241,.1), rgba(129,140,248,.05)); border:1px solid rgba(99,102,241,.2); }
.balance-symbol{ font-size:30px;margin-bottom:10px; }
.balance-item strong{ display:block;margin-bottom:10px;font-size:clamp(14px,2.2vw,16px);color:var(--amber-600); }

.page-number{
  position:absolute;bottom:20px;right:25px;
  background:rgba(245,158,11,.15);color:var(--amber-400);
  border-radius:12px;padding:4px 12px;font-weight:700;
  font-size:clamp(11px,1.8vw,13px);text-shadow:0 0 6px rgba(245,158,11,.6);
}
.page-left .page-number{ left:25px;right:auto; }

/* ===================== COVER ===================== */
/* Ảnh bìa qua biến: --cover-front / --cover-back (url(...)) */
.cover-front,.cover-back{
  background-color:#111827;
  background-image:
    linear-gradient(180deg, rgba(0,0,0,.35) 0%, rgba(0,0,0,.55) 100%),
    var(--cover-photo, none);
  background-position:center;background-size:cover;background-repeat:no-repeat;
  background-blend-mode:multiply;
  border:2px solid var(--amber-700);color:var(--amber-400);
  text-shadow:0 0 12px var(--glow-amber);
  display:flex;flex-direction:column;justify-content:center;align-items:center;
}
.cover-front{ --cover-photo:var(--cover-front, none); }
.cover-back { --cover-photo:var(--cover-back,  none);  }

.cover-ornament,.back-ornament{
  width:70%;height:3px;margin:25px 0;border-radius:2px;
  background:linear-gradient(to right,transparent,rgba(255,255,255,.85) 20%,rgba(255,255,255,.85) 80%,transparent);
  box-shadow:0 0 10px rgba(255,255,255,.3);
}
.cover-title h1{ font-size:clamp(28px,5vw,42px);font-weight:700;color:var(--amber-500);text-shadow:0 0 20px rgba(245,158,11,.6); }
.cover-quote{ font-style:italic;color:var(--amber-300);opacity:.9;max-width:80%;text-align:center; }

/* ===================== NAV / INDICATOR ===================== */
.navigation{ position:absolute;top:50%;transform:translateY(-50%);z-index:100; }
.nav-prev{ left:-90px; } .nav-next{ right:-90px; }

.nav-button{
  width:55px;height:55px;border-radius:50%;border:1px solid rgba(255,255,255,.18);
  display:flex;align-items:center;justify-content:center;cursor:pointer;
  background:linear-gradient(135deg, rgba(245,158,11,.95), rgba(251,191,36,.95));
  color:#111;box-shadow:0 8px 25px var(--glow-amber);transition:.25s;
  backdrop-filter:blur(10px);
}
.nav-button:hover{ transform:scale(1.12);background:linear-gradient(135deg,var(--amber-400),var(--amber-500));box-shadow:0 12px 35px rgba(245,158,11,.45); }
.nav-button:active{ transform:scale(.97); }
.nav-button:disabled{ opacity:.35;cursor:not-allowed;transform:none;box-shadow:0 4px 15px rgba(0,0,0,.2); }

.page-indicator{
  position:absolute;bottom:-12%;left:50%;transform:translateX(-50%);
  background:rgba(245,158,11,.88);color:#111;font-weight:700;
  padding:10px 22px;border-radius:22px;font-size:clamp(12px,2vw,14px);
  box-shadow:0 8px 25px var(--glow-amber), inset 0 1px 0 rgba(255,255,255,.25);
  border:1px solid rgba(255,255,255,.18);transition:.2s;
}
.page-indicator:hover{ transform:translateX(-50%) translateY(-2px); }

/* ===================== RESPONSIVE ===================== */
@media (max-width: 1024px){
  .nav-prev{ left:-70px; } .nav-next{ right:-70px; }
}
@media (max-width: 768px){
  .book-container{ width:95vw;height:75vh; }
  .page-indicator{ bottom:-15%; }
}
@media (max-width: 480px){
  .book-container{ width:98vw;height:70vh; }
  .nav-prev{ left:-60px; } .nav-next{ right:-60px; }
  .nav-button{ width:45px;height:45px; }
  .page-indicator{ bottom:-18%; padding:8px 16px; }
}
